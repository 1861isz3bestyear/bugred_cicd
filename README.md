    ДОКУМЕНТАЦИЯ ДЛЯ ТЕСТОВОГО ФРЭЙМВОРКА ФРОНТЭНДА САЙТА http://users.bugred.ru/

    Технические требования
    https://testbase.atlassian.net/wiki/spaces/USERS/pages/1074327

Основная задача: создание и отладка процесса CI/CD. В данном случае, мы имеем CRM систему (http://users.bugred.ru/). Её функционал: регистрация в системе, создание организаций и персонала внутри, создание задач. Подробную информацию вы сможете увидеть в технических требованиях выше. CI/CD запускается автоматически, как только мы выполняем комманду GIT push (пушим мы, конечно же, репозиторий bugred_cicd, например, добавив новые тесты). Выполнение тестов происходит в бранч-ветке gh-pages. После развертывания и выполнения всех тестов, формируется подробный HTML отчет (Allure report) cо скриншотами.

Для запуска нам потребуется два токена: CI_TOKEN и LOGIN - токен переменных окружения.

Утилиты, необходимые для запуска локально:
Python, Chrome browser, Docker, Java developer kit, Allure report

Стоит отметить, что для Питона, его зависимостей и виртуального окружения использовался один пакетный менеджер - UV by ASTRAL. Техническая документация к нему - https://docs.astral.sh/uv/
Для доступа к сайту с территории РФ необходимо использовать VPN или TOR.

  АРХИТЕКТУРА ФРЭЙМВОРКА

Основной конфигурационный файл - conftest.py. В нем мы определяем опции драйвера, как pytest фикстуры: локацию бинарника, совместимость с процессором (в моём случае ARM-64)*, возможность запуска в среде без графической оболочки.
*В случае, если вы работаете c прочессором INTEL X-86, вам может потребоваться другая конфигурация.

Папка config содержит 2 файла: links.py - список адресов веб страниц, data.py - данные, которые мы будем вводить (токен переменных окружения - LOGIN и генератор данных для ввода).

Папка base содержит 2 файла: base_page.py - класс BasePage - это набор методов, которые в дальнейшем будут унаследованы страницами и локаторами, base_test.py - класс BaseTest - это набор методов, которые в дальнейшем будут унаследованы функциями проверок.

Папка pages содержит файлы веб страниц. Каждый файл содержит в себе: набор констант (адрес страницы, набор локаторов*(элементы взаимодействия, определяемые XPATH)), набор функций взаимодействующих с данными локаторами, в т ч фикстурами allure, необходимыми для последующего allure отчета.
*В тестировании UI с использованием Selenium, долгое время существовала практика использования набора локаторов, как отдельного файла. Данный подход кажется мне ошибочным по следующим причинам: большое количество локаторов, схожих по функционалу, а также по названию. Как результат, файл с большим набором одноименных локаторов, в которых легко потеряться (одни кнопки submit и href чего стоят). В подходе, где локаторы указаны непосредственно в файле, соответствующем странице, возможность запутаться в необходимых элементах минимальна.

Папка tests - набор директорий тестов, организованных по принципу проверки конкретной функции. Каждая директория имеет файл base , где перечисляются набор возможных действий (шагов) и непосредственно сами сценарии, отдельным файлом. Результат всегда подкрепляется скриншотом.

Подготовлено: Попов Виктор.
